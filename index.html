<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SYSTEX</title>

    <!-- CSS -->
    <link rel="stylesheet" href="./css/style.css" media="screen"/>
    <link rel="stylesheet" href="./css/print.css" media="print"/>
    
    <!-- JS -->
    <script src="./scripts/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.228/pdf.min.js"></script>

    <!-- JSON -->
    <script type="text/javascript" src="./json/report.json"></script>
    <script type="text/javascript" src="./json/test.json"></script>

</head>
<body>
    <div class="btnBlock">
        <button id="update">更新</button>
        <button id="export">輸出為pdf</button>
    </div>
    <div id="page-0" class="page">
        <!-- <button id="show-pdf-button">Show PDF</button> 
        <div id="pdf-main-container">
            <div id="pdf-loader">Loading document ...</div>
            <div id="pdf-contents">
                <div id="pdf-meta">
                    <div id="pdf-buttons">
                        <button id="pdf-prev">Previous</button>
                        <button id="pdf-next">Next</button>
                    </div>
                    <div id="page-count-container">Page <div id="pdf-current-page"></div> of <div id="pdf-total-pages"></div></div>
                </div>
                <canvas id="pdf-canvas" width="400"></canvas>
                <div id="page-loader">Loading page ...</div>
            </div>
        </div> -->
    </div>
    <div id="page-1" class="page">
        <div class="border">
            <table class="table1 margin" border="1">
                <tr>
                    <th style="width:30%; padding: 10px;">公司名稱</th>
                    <td id="company" style="text-align:left;"></td>
                </tr>
                <tr>
                    <th style="width:30%; padding: 10px;">交付項目</th>
                    <td id="project" style="text-align:left;"></td>
                </tr>
                <tr>
                    <th style="width:30%; padding: 10px;">維護期間</th>
                    <td id="period" style="text-align:left;"></td>
                </tr>
                <tr>
                    <th style="width:30%; padding: 30px;">系統名稱(Hostname)</th>
                    <td id="hostname" style="text-align:left;"></td>
                </tr>
            </table>
            <table class="table1" border="1">
                <tr>
                    <th style="width:30%; padding: 10px;">DB 負責人</th>
                    <td id="db" style="text-align:left;"></td>
                </tr>
                <tr>
                    <th style="width:30%; padding: 10px;">顧問姓名</th>
                    <td id="consultant" style="text-align:left;"></td>
                </tr>
                <tr>
                    <td id="date" colspan="2" style="padding: 10px; font-size: 22pt;"></td>
                </tr>
            </table>
        </div>   
    </div>
    <div id="page-2" class="page">
        <div class="border">      
            <input type="file" id="upload" accept=".jpg, .jpeg, .png, .pdf">
            <div id="preview">         
                <p>點擊上傳檔案</p>
                <!-- <img style="width:720px; height:1050px; display:none"/> -->
                <canvas id="pdf-canvas" width="400"></canvas>
            </div>
        </div>
    </div>
    <div id="page-3" class="page">
        <div class="border">
            <table class="table1 margin" border="1">
                <tr class="tr-1">
                    <th style="width:30%; padding: 10px; text-align:left;">公司名稱</th>
                    <td></td>
                </tr>
                <tr class="tr-2">
                    <th style="width:30%; padding: 10px; text-align:left;">交付項目</th>
                    <td></td>
                </tr>
                <tr class="tr-3">
                    <th style="width:30%; padding: 10px; text-align:left;">維護期間</th>
                    <td></td>
                </tr>
                <tr class="tr-4">
                    <th style="width:30%; padding: 30px; text-align:left;">系統名稱(Hostname)</th>
                    <td></td>
                </tr>
            </table>
            <table class="table1" border="1">
                <tr class="tr-5">
                    <th style="width:30%; padding: 10px; text-align:left;">DB 負責人</th>
                    <td></td>
                </tr>
                <tr class="tr-6">
                    <th style="width:30%; padding: 10px; text-align:left;">顧問姓名</th>
                    <td></td>
                </tr>
                <tr class="tr-7">
                    <td colspan="2" style="padding: 10px; font-size: 22pt; text-align:left;"></td>
                </tr>
            </table>
        </div>   
    </div>
    <div id="page-4" class="page">
        <div class="border">
            <h1>系統使用空間</h1>
            <table class="system table2" border="1">
                <tr class="header">
                    <th>Filesystem</th>
                    <th>Size</th>
                    <th>Used</th>
                    <th>Avail</th>
                    <th>Use%</th>
                    <th>Mounted</th>
                </tr>
            </table>
        </div>
    </div>
    <div id="page-5" class="page">
        <div class="border">
            <h1>表空間使用報告</h1>
            <span class="unit">單位(MB)</span>
            <table class="tablespace table2" border="1">
                <tr class="header">
                    <th>Tablespace</th>
                    <th>CurrentSize</th>
                    <th>Used</th>
                    <th>Free</th>
                    <th>MaxSize</th>
                    <th>Used%</th>
                </tr>
            </table>
        </div>
    </div>
    <div id="page-6" class="page">
        <div class="border">
            <h1>RMAN備份</h1>
            <table class="rman table2" border="1">
                <tr class="header">
                    <th>DATE</th>
                    <th>STATUS</th>
                </tr>
            </table>
        </div>
    </div>
    <div id="page-7" class="page">
        <div class="border">
            <h1>DataGuard同步機制</h1>
            <table class="dataguard table2" border="1">
                <tr class="header">
                    <th>THREAD#</th>
                    <th>DEST_ID</th>
                    <th>APPLIED</th>
                    <th>SEQUENCE#</th>
                    <th>TIME</th>
                </tr>
            </table>
        </div>
    </div>
    <div id="page-8" class="page">
        <div class="border">
            <h1>物件狀態異常報告</h1>
            <p class="message"></p>
            <table class="exception table2" border="1">
                <tr class="header">
                    <th>Owner</th>
                    <th>Object Name</th>
                    <th>Object Type</th>
                    <th>Status</th>
                </tr>
            </table>
        </div>
    </div>
    <div id="page-9" class="page">
        <div class="border">
            <h2>效能分析說明</h2>
            <table class="effect table2" border="1">
                <tr class="header">
                    <th>項目</th>
                    <th>數值</th>
                    <th>狀態</th>
                </tr>
            </table>
            <br><span>說明:</span><br>
            <span>1.若連線數明顯發生成長或區間差距過大，代表資料庫系統可能存在效能問題(如:資料鎖定 Lock wait)，目前連線數差異區間小，表示資料庫運作穩定。</span><br><br>
            <span>2.根據官方文件目前 Buffer Hit%符合原廠建議值，無須調整。</span>
            <h2>TOP SQL-請查看Elapsed Time Exec(s)執行較久的語法</h2>
            <table class="sql table2" border="1">
                <tr class="header">
                    <th>Elapsed Time(s)</th>
                    <th>Execution</th>
                    <th>Elap per Exec(s)</th>
                    <th>SQL Id</th>
                    <th>SQL Text</th>
                </tr>
            </table>
        </div>
    </div>
    <div id="page-10" class="page">
        <div class="border">
            <h1>總結</h1>
            <span>資料庫問題彙總與上一期比較</span>
            <table class="comparison table2" border="1">
                <tr class="header comTitle">
                    <th></th>
                </tr>
                <tr class="header">
                    <th style="width:15%">系統名稱</th>
                    <th colspan="2">物件狀態</th>
                    <th colspan="2">Dead Lock</th>
                    <th colspan="2">備份狀態</th>
                    <th colspan="2">Tablespace狀態</th>
                </tr>
                <tr class="content">
                    <td class="event"></td>
                    <td class="object1"><input class="cinput" type="text"/></td>
                    <td class="object2"><input class="cinput" type="text"/></td>
                    <td class="lock1"><input class="cinput" type="text"/></td>
                    <td class="lock2"><input class="cinput" type="text"/></td>
                    <td class="copy1"><input class="cinput" type="text"/></td>
                    <td class="copy2"><input class="cinput" type="text"/></td>
                    <td class="space1"><input class="cinput" type="text"/></td>
                    <td class="space2"><input class="cinput" type="text"/></td>
                </tr>
            </table>
            <br><span>現況與建議事項</span>
            <table class="suggestion table2" border="1">
                <tr class="header">
                    <th>項目</th>
                    <th style="width:30%">狀況</th>
                </tr>
                <tr>
                    <td>空間配置</td>
                    <td class="s1"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>資料庫備份、回復機制</td>
                    <td class="s2"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>記憶體效能與效能相關參數設置</td>
                    <td class="s3"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>控制檔配置</td>
                    <td class="s4"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>重作日誌設定</td>
                    <td class="s5"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>Archive log file</td>
                    <td class="s6"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>剩餘空間</td>
                    <td class="s7"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>暫存空間設定</td>
                    <td class="s8"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>表格與索引分析狀況</td>
                    <td class="s9"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>物件狀態</td>
                    <td class="s10"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>資料庫內定期作業</td>
                    <td class="s11"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>權限設定</td>
                    <td class="s12"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>SQL 與相關Log file</td>
                    <td class="s13"><input class="sinput" type="text"/></td>
                </tr>
                <tr>
                    <td>Alert log error</td>
                    <td class="s14"><input class="sinput" type="text"/></td>
                </tr>
            </table>
        </div>
    </div>
</body>
<script>
    // var input = document.getElementById('upload');

    // input.addEventListener('change', function() {
    //     //no uploaded files
    //     if(input.files.length === 0) {
    //         console.log('no files');
    //         $('#preview > p').css('display','block');
    //         $('#preview > img').css('display','none');
    //     } 
    //     //files uploaded
    //     else {
    //         if(input.files[0].type.includes('pdf')){
    //             console.log('pdf');
    //             var loadingTask = PDFJS.getDocument( window.URL.createObjectURL(input.files[0]) );
    //         }else if(input.files[0].type.includes('image')){
    //             $('#preview > p').css('display','none');
    //             $('#preview > img').css('display','block');
    //             $('#preview > img').attr('src',window.URL.createObjectURL(input.files[0]));
    //             console.log(input.files);
    //         }
    //     }
    // });
</script>
<script src="./js/first_page.js"></script>
<script src="./js/edit.js"></script>
<script src="./js/upload.js"></script>
<script src="./js/print.js"></script>
<script src="./js/copy_pages.js"></script>
</html>